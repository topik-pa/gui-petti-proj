(()=>{"use strict";const e=()=>{const e=document.querySelector("#cookie_layer_accept"),t=document.querySelector("#cookie_layer");""===function(e){const t="tradingradar-net-privacy=",o=document.cookie.split(";");for(let e=0;e<o.length;e++){let s=o[e];for(;" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return""}()&&setTimeout((()=>{t.classList.add("active")}),3e3),e.addEventListener("click",(e=>{e.preventDefault(),function(e,t,o){const s=new Date;s.setTime(s.getTime()+10368e6);const n="expires="+s.toUTCString();document.cookie="tradingradar-net-privacy=true;"+n+";path=/"}(),t.classList.remove("active")}))},t=()=>{const e=document.getElementById("goto_top"),t="visible";window.addEventListener("scroll",function(e,t=300){let o;return(...s)=>{clearTimeout(o),o=setTimeout((()=>{e.apply(this,s)}),t)}}((function(){window.scrollY>=200?e.classList.add(t):e.classList.remove(t)}))),e.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})}))},o=async()=>{console.log("index")},s={get:async(e="/api/")=>{const t={};return await fetch(window.location.origin+"/"+e,{method:"GET"}).then((e=>(t.status=e.status,e.json()))).then((e=>{t.body=e})).catch((e=>{console.error(e)})),t},post:async(e={},t="/api/")=>{const o={},s={method:"POST",body:JSON.stringify(e)};return await fetch(window.location.origin+"/"+t,s).then((e=>(o.status=e.status,e.json()))).then((e=>{o.body=e})).catch((e=>{console.error(e)})),o}},n=s,r={info:{status:"idle",body:void 0},analysis:{status:"idle",body:void 0},news:{status:"idle",body:void 0}},a=["idle","loading","success","error"];let i,l;async function c(e){r[e].status="loading",u(e);try{const t=await n.get(`api/${e}/${l}`);r[e].body=t.body,r[e].status="success"}catch(t){r[e].status="error",console.error(t)}u(e)}function u(e){const t=i.getElementsByClassName(e)[0];t.classList.remove(...a),t.classList.add(r[e].status)}const y=async()=>{if(l=new URLSearchParams(window.location.search).get("isin")||window.location.pathname.replace("/stock/",""),i=document.getElementById("stock_info"),l&&(await c("info"),"success"===r.info.status&&function(){i.querySelector(".last-price span").innerText=r.info.body.lastPrice.value||"nd",i.querySelector(".volatility span").innerText=r.info.body.volatility?.value;const e=i.querySelector(".profile div");e.prepend(r.info.body.profile?.value),e.querySelector("a").href=r.info.body.profile?.source;const t=i.querySelector(".comment div");t.prepend(r.info.body.comment?.value),t.querySelector("a").href=r.info.body.comment?.source;const o=i.querySelector(".dividends");o.querySelector(".divYield span").prepend(r.info.body.divYield?.value),o.querySelector(".divValue span").prepend(r.info.body.lastDiv?.value),o.querySelector(".lastDiv span").prepend(r.info.body.lastDivDate?.value),o.querySelector("a").href=r.info.body.lastDivDate?.source;const s=i.querySelector(".average");s.querySelector(".mm20 span").prepend(r.info.body.mm20days?.value),s.querySelector(".mm40 span").prepend(r.info.body.mm40days?.value),s.querySelector(".mm100 span").prepend(r.info.body.mm100days?.value),s.querySelector("a").href=r.info.body.mm20days?.source;const n=i.querySelector(".minmax");n.querySelector(".absMax span").prepend(r.info.body.absMax?.value),n.querySelector(".absMin span").prepend(r.info.body.absMin?.value),n.querySelector(".max span").prepend(r.info.body.currentYearMax?.value),n.querySelector(".min span").prepend(r.info.body.currentYearMin?.value),n.querySelector("a").href=r.info.body.absMax?.source;const a=i.querySelector(".performance");a.querySelector(".perf1M span").prepend(r.info.body.perf1M?.value),a.querySelector(".perf6M span").prepend(r.info.body.perf6M?.value),a.querySelector(".perf1Y span").prepend(r.info.body.perf1Y?.value),a.querySelector("a").href=r.info.body.perf1M?.source}(),await c("analysis"),"success"===r.analysis.status&&function(){const e=i.querySelector(".analysis"),t=e.querySelector(".borsa-italiana-logo");t.querySelector("a").href=r.analysis.body.borsaIt_resistance?.source,t.querySelector(".resistance span").innerText=r.analysis.body.borsaIt_resistance?.value,t.querySelector(".support span").innerText=r.analysis.body.borsaIt_support?.value,t.querySelector(".rsi span").innerText=r.analysis.body.borsaIt_rsi?.value,t.querySelector(".evaluation span").innerText=r.analysis.body.borsaIt_evaluation?.value,t.querySelector(".rating span").innerText=r.analysis.body.borsaIt_rating?.value;const o=e.querySelector(".il-sole-24-ore-logo");o.querySelector("a").href=r.analysis.body.sol24_shortTendency?.source,o.querySelector(".short-tend span").innerText=r.analysis.body.sol24_shortTendency?.value,o.querySelector(".med-tend span").innerText=r.analysis.body.sol24_mediumTendency?.value;const s=e.querySelector(".milano-finanza-logo");s.querySelector("a").href=r.analysis.body.milFin_mfRanking?.source,s.querySelector(".rating span").innerText=r.analysis.body.milFin_mfRanking?.value,s.querySelector(".risk span").innerText=r.analysis.body.milFin_mfRisk?.value,s.querySelector(".rsi span").innerText=r.analysis.body.milFin_mfRsi?.value;const n=e.querySelector(".soldi-on-line-logo");n.querySelector("a").href=r.analysis.body.sol_lastTargetPrice?.source,n.querySelector(".target span").innerText=r.analysis.body.sol_lastTargetPrice?.value,n.querySelector(".evaluation span").innerText=r.analysis.body.sol_lastJudgment?.value;const a=e.querySelector(".teleborsa-logo");a.querySelector("a").href=r.analysis.body.teleb_tbResistance?.source,a.querySelector(".resistance span").innerText=r.analysis.body.teleb_tbResistance?.value,a.querySelector(".support span").innerText=r.analysis.body.teleb_tbSupport?.value,a.querySelector(".trend span").innerText=r.analysis.body.teleb_trend?.value}(),await c("news"),"success"===r.news.status&&function(){const e=i.querySelector(".news").getElementsByTagName("ul")[0];for(const t of r.news.body){const o=document.createElement("li"),s=document.createElement("a");s.innerText=t.title,s.title=t.title,s.href=t.url,s.target="_blank",s.rel="noopener noreferrer",o.appendChild(s),e.appendChild(o)}}(),"success"===r.info.status&&"success"===r.analysis.status))return r};let d;const p={init:async e=>{d=document.getElementById("stock_alerts"),function(e){const t=d.querySelector("#a1"),o=d.querySelector("#a2"),s=d.querySelector("#a3"),n=d.querySelector("#a4"),r=d.querySelector("#a5"),a=d.querySelector("#a6"),i=d.querySelector("#a7"),l=d.querySelector("#a8"),c=e.info.body.lastPrice.value;c&&(c>=e.info.body.mm20days.value?t.classList.remove("hide"):o.classList.remove("hide"),c>=e.info.body.mm40days.value?s.classList.remove("hide"):n.classList.remove("hide"),c>=e.analysis.body.borsaIt_resistance.value&&r.classList.remove("hide"),c<e.analysis.body.borsaIt_support.value&&a.classList.remove("hide"),c>=e.analysis.body.teleb_tbResistance.value&&i.classList.remove("hide"),c<e.analysis.body.teleb_tbSupport.value&&l.classList.remove("hide"),d.classList.add("show"))}(e)}},b=p,m=async()=>{const e=await y();await b.init(e)};if((()=>{const e=document.querySelector("header"),t=e.querySelector(".icon-menu"),o=e.querySelector("nav");t.addEventListener("click",(()=>{o.classList.toggle("show")}))})(),e(),t(),location.hash){const e=document.getElementById(location.hash.replace("#",""));e&&setTimeout((()=>{e.scrollIntoView({behavior:"smooth"})}),500)}document.querySelector("body#home")&&o(),document.querySelector("body#analysis")&&m(),document.querySelector("body#err404")&&(async()=>{})()})();